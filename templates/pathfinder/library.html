{% extends 'base.html' %}
{% load static %}

{% block title %}Career Library | Lumos Career{% endblock %}

{% block content %}
<div class="homepage-container pathfinder-wrapper">
    <!-- Hero Section -->
    <section class="hero-section text-center mb-5">
        <h1 class="hero-title">Explore <span class="brand-highlight">Expert Journeys</span></h1>
        <p class="hero-subtitle">
            Choose from our curated collection of high-demand career paths. Designed by industry experts based on market
            data.
        </p>
    </section>

    <!-- Path Grid -->
    <div class="features-grid">
        {% for path in predefined_paths %}
        <div class="feature-card glass-card">
            <div class="path-header mb-4">
                <div class="d-flex justify-content-between align-items-start">
                    <h2 class="path-title">{{ path.title }}</h2>
                    <span class="step-badge">
                        {{ path.roadmap_data.steps|length }} Steps
                    </span>
                </div>

                <div class="progress-bar-bg mt-3">
                    <div class="progress-fill dynamic-width" data-width="{{ path.progress }}%"></div>
                </div>

                <span class="time-estimate">
                    Estimated: ~{{ path.roadmap_data.steps|length|add:"4" }} Weeks
                </span>
            </div>

            <p class="path-description">
                {{ path.description|truncatewords:25 }}
            </p>

            <div class="path-actions mt-auto d-flex gap-2">
                <a href="{% url 'view_career_path' path.id %}" class="btn-primary flex-grow-1 text-center view-btn">
                    View Roadmap
                </a>
            </div>
        </div>
        {% empty %}
        <div class="empty-state">
            <div class="empty-icon">üîç</div>
            <h3>No paths found currently.</h3>
            <p>Our experts are crafting new journeys. Check back soon!</p>
        </div>
        {% endfor %}
    </div>

    <!-- Custom Path CTA -->
    <section class="profile-promo custom-path-cta">
        <h2>Want something unique?</h2>
        <p class="cta-text">
            Use our AI Pathfinder to generate a custom roadmap tailored specifically to your personality and current
            skills.
        </p>
        <a href="{% url 'pathfinder' %}" class="btn-outline cta-btn">
            Create Custom Path
        </a>
    </section>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const bars = document.querySelectorAll('.dynamic-width');
        bars.forEach(bar => {
            bar.style.width = bar.getAttribute('data-width');
        });
    });
</script>

<style>
    /* Scoped Styles for Career Library */
    .pathfinder-wrapper {
        max-width: 1200px;
        margin: 0 auto;
        padding: 40px 20px;
    }

    .hero-title {
        font-size: 3rem;
        margin-bottom: 20px;
    }

    .hero-subtitle {
        font-size: 1.2rem;
        color: var(--text-muted);
        max-width: 700px;
        margin: 0 auto;
    }

    .features-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
        gap: 30px;
    }

    .glass-card {
        background: rgba(30, 30, 30, 0.6);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.1);
        padding: 30px;
        border-radius: 16px;
        transition: transform 0.3s ease, border-color 0.3s ease;
        display: flex;
        flex-direction: column;
        height: 100%;
    }

    .glass-card:hover {
        transform: translateY(-5px);
        border-color: var(--color-primary);
    }

    .path-title {
        font-size: 1.5rem;
        color: #fff;
        margin: 0;
    }

    .step-badge {
        background: rgba(var(--color-primary-rgb), 0.2);
        color: var(--color-primary);
        padding: 5px 10px;
        border-radius: 20px;
        font-size: 0.8rem;
    }

    .progress-bar-bg {
        height: 6px;
        background: #333;
        border-radius: 3px;
        overflow: hidden;
    }

    .progress-fill {
        background: var(--color-primary);
        height: 100%;
    }

    .time-estimate {
        font-size: 0.8rem;
        color: var(--text-muted);
        display: block;
        margin-top: 5px;
    }

    .path-description {
        color: var(--text-secondary);
        flex-grow: 1;
        line-height: 1.6;
        margin-bottom: 20px;
    }

    .view-btn {
        text-decoration: none;
        border-radius: 8px;
        padding: 10px;
    }

    .empty-state {
        grid-column: 1 / -1;
        text-align: center;
        padding: 60px;
    }

    .empty-icon {
        font-size: 4rem;
        opacity: 0.5;
        margin-bottom: 20px;
    }

    .custom-path-cta {
        margin-top: 80px;
        text-align: center;
        padding: 60px;
        background: rgba(255, 255, 255, 0.03);
        border-radius: 16px;
        border: 1px solid var(--border-color);
    }

    .cta-text {
        color: var(--text-muted);
        max-width: 600px;
        margin: 20px auto;
    }

    .cta-btn {
        border: 1px solid var(--color-primary);
        padding: 12px 30px;
        border-radius: 30px;
        font-weight: 600;
        color: var(--color-primary);
        text-decoration: none;
        transition: all 0.3s ease;
        display: inline-block;
    }

    .cta-btn:hover {
        background: var(--color-primary);
        color: white;
    }
</style>
{% endblock %}